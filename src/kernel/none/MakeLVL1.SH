# Functions that can be inlined are externally defined too
# This is done with level0.c and level1.c

kern=$src/kernel/$kernlvl1

cat >> $file << EOT
L1OBJS=$kern/tune.h $kern/int.h $kern/level1.h
parilvl1.h: \$(L1OBJS) $src/headers/paritune.h
	cat \$(L1OBJS) > parilvl1.h
MP_C=$kern/mp.c $kern/cmp.c $kern/gcdll.c $kern/ratlift.c $kern/gcd.c $kern/invmod.c $kern/mp_indep.c $kern/add.c
mp.c: \$(MP_C)
	cat \$(MP_C) > mp.c
mp\$(_O): .headers mp.c
	\$(CC) -c \$(CFLAGS) \$(DLCFLAGS) \$(CPPFLAGS) -o mp\$(_O) mp.c
mpinl\$(_O): .headers parilvl1.h
	\$(CC) -c \$(CFLAGS) \$(DLCFLAGS) \$(CPPFLAGS) -o mpinl\$(_O) $kern/level1.c
EOT
