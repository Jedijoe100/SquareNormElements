default(realprecision,38);
test(a,b)=my(c=abs(a-b)); if(!c,oo, ceil(log(c)/log(10)));
test(sumnummon(n=1,1/n^2), Pi^2/6)
test(sumnummon(n=1,log(1+1/n)/n), sumpos(n=1,log(1+1/n)/n))
tab=sumnummoninit(,1);
test(sumnummon(n=1, 1/n^2, tab), -zeta'(2))
sumnummon(n=3, 1/n^2, tab)

TEST=[n->1/(n^2+1), n->log(1+1/n)/n, n->lngamma(1+1/n)/n, n->sin(1/sqrt(n))/n^(3/2)];
FUN=[f->sumnumdelta(n=1,f(n)), f->sumnummon(n=1,f(n))];

localprec(57); V=vector(#TEST,i, sumnumdelta(n=1,TEST[i](n)));

{
  for (i = 1, #TEST,
    my (f = TEST[i]);
    print(f);
    for (j = 1, #FUN,
      my (SUM = FUN[j]);
      my (t = test(SUM(f), V[i]));
      print(t);
    )
  )
}

sumnumdelta(n = [1, -3/2], sin(1/sqrt(n))/n)

tab=sumnummoninit(,n->log(n)^2);
test(sumnummon(n=1, 1/n^2, tab), zeta''(2))

tab=sumnummoninit([1,2]);
test(sumnummon(n=1, 1/n^3, tab), zeta(3))

tab=sumnummoninit([1,1/2]);
test(sumnummon(n=1, 1/n^(3/2), tab), zeta(3/2))
