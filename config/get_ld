# Which Executable Linker ?
#
_ld_list='LD LDFLAGS LIBS runpathprexix LDisGCC LDused GNULDused'
case "$osname" in
  darwin) LIBS= ;;
  osf1)   LIBS='-lm -lots';;
  *)      LIBS=-lm;;
esac

if test -z "$LD"; then LD=$CC; fi

if test "$fastread" != yes; then
  echo $n ..."Which linker for building executables ? $c"
  dflt=$LD; rep=; . ./myread
  LD=$ans
fi

LDisGCC=
GNULDused=
LDused=$LD
if test "$LD"="$CC" -a -n "$__gnuc__"; then
  LDused=`$CC -print-prog-name=ld`
  LDisGCC=yes
fi
if ($LDused -v 2>&1 | grep GNU > /dev/null); then GNULDused=yes; fi

# Which Flags for Executable Linker?
ldflags=
if test "$LD"="$CC"; then ldflags=$CFLAGS; fi
case "$osname-$arch" in
  osf1-*) case "$optimization" in
            full|profiling) ldflags="$ldflags -g0 -O4";;
          esac ;;
  linux-*|cygwin*|freebsd-*)
    if test -n "$LDisGCC"; then
      ldflags="$ldflags -Wl,-export-dynamic"
    else
      ldflags="$ldflags -export-dynamic"
    fi ;;
  os2-*)     ldflags="$ldlags -Zexe"
             case "$optimization" in
               full) ldflags="$ldflags -s";;
             esac;;
esac
LDFLAGS="$LDFLAGS $ldflags"

if test "$fastread" != yes; then
  echo $n ..."With which flags ? $c"
  dflt=$LDFLAGS; rep=; . ./myread
  LDFLAGS=$ans
fi

echo "Executable linker is   $LD  $LDFLAGS"

case "$osname" in
  osf1|linux|cygwin*|freebsd) runpathprefix='-rpath' ;;
  solaris) runpathprefix='-R' ;;
esac
